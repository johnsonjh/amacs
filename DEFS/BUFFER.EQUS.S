;-*- Mode: Merlin -*-;; defs/buffer.equs	(06-Aug-87  2:07 pm);; Buffer Management;TheBuffer equ $60  ;the current buffer;Point = TheBuffer  ;location of pointPageTop = Point+2  ;location of the page topMarkPnt = PageTop+2  ;the mark stack pointerBuffTop = MarkPnt+2  ;logical buffer topBuffBot = BuffTop+2  ;logical buffer bottomGapTop = BuffBot+2  ;starting point of gapGapBot = GapTop+2  ;last byte of gapPhysBuffTop = GapBot+2  ;physical top of bufferPhysBuffBot = PhysBuffTop+2 ;physical bottom of bufferBuffData = PhysBuffBot+2 ;pointer to buff name, modelist, etc.;TheBuffer_X = BuffData+2  ;bottom of current buffer;TheBufferLen = TheBuffer_X-TheBuffer ;size of buffer stuff;; Additional Buffer Data is stored with the following offsets; pointed to by  these variables: ;of_BuffFile = $00   ;the filenameof_MajorMode = of_BuffFile+63 ;single byte is major modeof_MinorMode = of_MajorMode+1 ;8 bits of minor modesof_BuffFlags = of_MinorMode+1 ;read-only, modified, etc...of_MarkList = of_BuffFlags+1 ;offset to the last 8 marksof_BuffName = of_MarkList+16 ;zero delimited string of buffer nameof_LastThing = of_BuffName+30;;SizeOfBInfo = TheBufferLen+of_LastThing ;total size of buffer stuff;; Buffer Flags are bits in a byte field.;bf_ReadOnly = %00000001  ;if set, buffer is read onlybf_Modified = %00000010  ;if set, buffer has been modifiedbf_LastKill = %00000100;;; Minor Modes are bits in a single byte field.;mm_AtomWord = %00000001  ;word commands ignore :, -, and _.mm_AutoFill = %00000010  ;spaces break lines sometimes.mm_Indent = %00000100  ;CRLF indents under the prev line.mm_DefMacro = %00001000  ;defining a keyboard macro.mm_CapWord = %00010000  ;capital letters delimit words.mm_WAbbrev = %00100000  ;some text can expand.mm_ElecCaps = %01000000  ;Electric caps-lock mode.;; Other Things:;MaxBuffs = 14   ;total number of buffers allowed.;HiRamPoint = $BFFF  ;highest ram point for buffer space.LoRamPoint = $801  ;lowest ram point for buffer space.;BuffPoint = $5E   ;utility buffer pointer.;RamBuffArea = $801  ;in the main bank.RamBuffSize = MaxBuffs*SizeOfBInfoRamBuffEnd = RamBuffArea+RamBuffSize;SelectedBuff = RamBuffEnd+1 ;the currently selected buffer index.LastBuffer = SelectedBuff+1 ;the last selected buffer index.;; BuffActList is a list of MaxBuffs bytes, $FF if the; buffer is active, $00 if the buffer hasn't been used,; and $01 if the buffer has been used, but is now dead.;BuffActList = LastBuffer+1BuffList_X = BuffActList+MaxBuffs;; Buffer loading/dumping equs.;BufferLoad = $D500  ;read buffer state file if present.BufferDump = BufferLoad+3 ;save buffer state in file.BufferFName = BufferDump+3 ;current pathname for buffers.;