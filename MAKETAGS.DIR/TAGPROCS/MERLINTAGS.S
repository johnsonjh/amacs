; -*- Mode: Merlin -*-;; File: MerlinTags.;; This file contains the routines necessary to process Merlin; files for AMACS tags.; put defs/maketags.equs org UserFuncAddr dsk bin/merlintags use macros/standard; da NullVect ;jump here for start file processing. da MerlinTag? ;jump here for IsTag? and tag processing. da NullVect ;jump here for end-of-file processing.;NullVect rts; put tagprocs/tag.subs;MerlinTag? equ *  ;check LineBuff for Merlin tag. lda LineBuff beq :fail ;no text, no tag.; lda LineBuff+1 jsr AlphaChar? bne :fail ;a tag begins with an alpha char.; ldx #$01 stx LineIndex; jsr NextToken ;get the current token. load temp;Tag jsr MoveToken ;assume that this is a label.; jsr NextToken load temp;ExtText ;is this an EXTernal label? jsr CompareToken bne :win ;no.;	...:fail lda #$FF ;fail, not a valid tag. rts;:win lda #$00 ;win. rts;ExtText str "EXT"EquText str "EQU"EqualText str "="EntText str "ENT";